<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="css/location_single.css"/>
        <link rel="stylesheet" type="text/css" href="css/project_all.css"/>    <!--remove eventually-->
		<link rel="stylesheet" type="text/css" href="css/map_interface.css"/>
        <link rel="stylesheet" type="text/css" href="css/leaflet.css"/>
		<link rel="stylesheet" type="text/css" href="css/l.geosearch.css"/>
		
		<script src="js/leaflet.js"></script> 
		<script src="js/l.control.geosearch.js"></script> 
		<script src="js/l.geosearch.provider.openstreetmap.js"></script> 
		
		<script type="text/ng-template" id="replyTree">
			<div style='display:inline-block; width:100%; font-size:15px;'>{{comment.user}}<div style='display:inline-block; float: right; font-size:15px;'>{{comment.date}}</div></div> <br>{{comment.comment}}<br>
			<div ng-if="comment.replies">
				<div style='margin-left:20px; border: 2px black solid;' ng-repeat="comment in comment.replies" ng-include="'replyTree'">
				</div>
			</div>
		</script>
    
	</head>
<body ng-app='mbira'>
    <div class="wrap" ng-controller='singleLocationCtrl'>    
		<div class="header">
			<div class="back"><a onclick="window.history.go(-1); return false;"><img src="img/back.png"/><p>TO {{previous}}</p></a></div>
			<h1>{{location.name}}</h1>
		</div>
    
		<div id="map"></div>

		<form id="editlocationform" name="editlocationform" novalidate ng-submit="submit()" role="form">
			<div class="header2">
				<div class="form-group">				        
					<input type="text" required class="form-control npInput" ng-model="location.name" placeholder="Location Name">
					<button type="submit" id="submit" class="btn btn-default" ng-disabled="editlocationform.$invalid" ng-class="{'btn-disabled': editlocationform.$invalid}">SAVE & CLOSE</button>
				</div><br>
			</div>
			
			<div class="form-group">				        
				<select ng-model="selectedExhibit" ng-options="exhibit.name for exhibit in exhibits"></select>
				<button type="button" ng-click='editPosition()' class="btn btn-default">EDIT POSITION</button>
			</div><br>
			
			<div class="form-group" ng-if='active'>	
				Click on the map or enter coordinates below to set a new location.<br><br>
				LATITUDE
				<div class="form-group">				        
					<input type="text" required class="form-control npInput" ng-model="location.latitude" placeholder="Latitude">
				</div><br>
				LONGITUDE
				<div class="form-group">				        
					<input type="text" required class="form-control npInput" ng-model="location.longitude" placeholder="Longitude">
				</div>					
			</div><br>
			
			<div class='field-label'>
					<h1 class='label-name'>DESCRIPTION</h1>					
			</div>
			
			<div class="form-group">			
				<textarea ng-model="location.description"></textarea>
			</div><br>
			
			<div class='field-label'>
				<div class="switch">
					<h1 class='label-name'>DIG DEEPER</h1>
					<input ng-model='location.toggle_dig_deeper' id="cmn-toggle-1" class="cmn-toggle cmn-toggle-round-flat" type="checkbox">
					<label for="cmn-toggle-1"></label>
				</div>
			</div>
			
			<div class="form-group">				        
				<textarea ng-model="location.dig_deeper"></textarea>
			</div><br>
			
			<div class='field-label'>
				<div class="switch">
					<h1 class='label-name'>MEDIA</h1>
					<input ng-model='location.toggle_media' id="cmn-toggle-2" class="cmn-toggle cmn-toggle-round-flat" type="checkbox">
					<label for="cmn-toggle-2"></label>
				</div>
			</div>
			
			<div class="medias">	
				<div class='media' ng-repeat='m in media'>
					<img ng-src='images/{{m.file_path}}' height="130" width="130">
				</div>
				<div class="media_new"> 
	                <div class="form-group-file">				        
	    					<input type="file" id="fileSelect" name="file" ng-file-select="onFileSelect($files)">
	    			</div>
					<img src="img/project_new_plus_icon_small.png" height="130" width="130">
					<div class="media_title_new"><h3>ADD MEDIA</h3></div>
				</div>
			</div><br>
			
			<div class='field-label'>
				<div class="switch">
					<h1 class='label-name'>COMMENTS</h1>
					<input ng-model='location.toggle_comments' ng-init="checked=true" id="cmn-toggle-3" class="cmn-toggle cmn-toggle-round-flat" type="checkbox">
					<label for="cmn-toggle-3"></label>
				</div>
			</div>

			<div class="form-group">	
				<div id='comments' ng-repeat="comment in comments" ng-if="location.toggle_comments" ng-include="'replyTree'">
				</div>				
			</div>
			<br>
			
		</form>
		
		<div class='field-label delete'>
					<h1 ng-click='delete()' class='label-name'>DELETE LOCATION</h1>
			</div>
	</div>
    

</body>
</html>

